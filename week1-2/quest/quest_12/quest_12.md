# モジュールを説明できる
## モジュールとは何か
モジュールを使うと、**メソッドを共同利用**できます。また、クラスにてモジュールをインクルードすることで、モジュールに定義したメソッドをあたかもクラス自身に定義されたメソッドとして使えるようにします。

## クラスとの違いは何か
モジュールとクラスの違いは以下の2点が挙げられます。
・**インスタンスが生成でき、モジュールはインスタンスが生成できない**
・**クラスは継承でき、モジュールは継承できない**

## モジュールを使うメリットは何か
メリットとしては、モジュールをクラスに組み込むことで、**クラス定義にメソッドをコピー＆ペーストしたのと同じようにモジュールのメソッドをクラスで利用できるようになること**です。
これは、**特定のクラスで再利用したいメソッドがあり、それを一カ所に集めておきたい場面**で非常に便利です。
複数のクラスでメソッドを共同利用するには次の3つの手順を行います。

1. **モジュールを作る**
2. **モジュールにメソッドを定義する。**
3. **モジュールのメソッドをクラスで使う。**

ホイップクリームのトッピングを例として考えていきます。
このような場面でモジュールを使うと、ドリンクでもケーキでもトッピングできる部品を作る事ができます。ホイップクリームをトッピングするメソッドを作り、メソッドを共同利用してみます。
それでは書いていきましょう。

## 1. モジュールを作る
まず初めにモジュールを作ります。ホイップクリームをトッピングするWhippedCreamという名前のモジュールにします。
```ruby:module.rb
module WhippedCream
end
```
```
ruby module.rb
(何も表示されません。)
```

```ruby:モジュールの定義
module モジュール名
end
```

## 2. モジュールにメソッドを定義する
次にモジュールにメソッドを定義します。モジュールはクラスと同じようにメソッドを定義できます。引数や戻り値も同じように可能です。
WhippedCreamモジュールにインスタンスメソッドを定義してみましょう。
ここでは、ホイップクリームをトッピングるすことを想定したwhipped_creamメソッドを定義します。

```ruby:module.rb
module WhippedCream
    def whipped_cream
        @name += "ホイップクリーム"
    end
end
```

```
ruby module.rb
(何も表示されません。)
```

module.rbを実行しても何も表示されないのは定義された上げではメソッドは実行されないからです。ここはクラスとの類似点ですね。

## 3. モジュールのメソッドをクラスで使う
それではモジュールを使用する側であるDrinkクラスを実装します。
```ruby:module.rb
class Drink
    def initialize(name)
        @name = name
    end
    def name
        @name
    end
end

drink = Drink.new("モカ")
puts drink.name
```

```
ruby module.rb
モカ
```

このDrinkクラスにて、WhippedCreamモジュールのwhipped_creamメソッドが使用でき、@nameの末尾に"ホイップクリーム"を加えるのがゴールです。
モジュールのメソッドをクラス使用できるようにするには、**includeメソッド**が必要です。

```ruby:inculeメソッド.
class クラス名
    include モジュール名
end
```

```ruby:module.rb
module WhippedCream
    def whipped_cream
        @name += "ホイップクリーム"
    end
end

class Drink
    include WhippedCream
    def initialize(name)
        @name = name
    end
    def name
        @name
    end
end

drink = Drink.new("モカ")
drink.whipped_cream
puts drink.name
```

```
ruby module.rb
モカホイップクリーム
```

`include WhippedCream`を実行すると、DrinkクラスのオブジェクトはモジュールWhippedCreamのメソッドである`whipped_cream`が利用できるようになります。
そのためdrinkオブジェクトの@nameを表示すると、その前の行で追加された`whipped_cream`メソッドが実行されるので、@nameは末尾にトッピングが追加された"モカホイップクリーム"となっています。

## まとめ
最後に@nameの動きとこのプログラムの流れをもう一度整理しましょう。
1. **Drink.rewメソッドの引数で"モカ"が渡され@nameに代入される。**
2. **ここで作られたDrinkクラスのオブジェクトは変数drinkに代入される。**
3. **次の行でdrinkオブジェクトのwhipped_creamメソッドが呼び出され、@nameの末尾に"ホイップクリーム"が追加されます。**
4. **@nameを取得すると、"モカホイップクリーム"となっています。**
