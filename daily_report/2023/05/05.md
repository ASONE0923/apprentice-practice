# 2023/05/05 (金)

## 本日の目標（TODO 目標/できるようになりたいこと）

- Qiita記事投稿
- ゼロからはじめるデータベース設計 第5~6章

## 学習時間（Hour）

- today: 3h

## 目標振り返り（TODO 進捗/できるようになりたいこと振り返り）

- ゼロからはじめるデータベース設計 第5章

## 詰まっていること（実現したいこと/現状/行ったこと/仮説）

- サブクエリが使い捨てのビュー（SELECT文）だということはわかるのだが、クエリの階層数が増えてきたときにきちんと対応できるか不安。理解がまだ少し浅いため、演習問題を解くのに時間がかかっている。サブクエリの理解を深めるために、引き続きアウトプット中心の学習を行う。

## 学んだこと（新しい気付き、学び）

- 相関サブクエリは、SQLのサブクエリの一種で、外側のクエリと内側のクエリの間に相関関係を持たせることができます。つまり、内側のクエリが外側のクエリに対して実行され、外側のクエリに基づいて内側のクエリが動的に結果を生成することができます。

具体的には、相関サブクエリは、内側のクエリで参照されるテーブルの列に外側のクエリで参照される列を含む場合に使用されます。つまり、内側のクエリは外側のクエリに応じて変化します。

以下は、相関サブクエリを使用して、外側のクエリで選択された各部門の平均給与を計算する例です。

```sql
SELECT dept_name, AVG(salary)
FROM employees
WHERE salary > (
  SELECT AVG(salary)
  FROM employees
  WHERE dept_name = outer_query.dept_name
)
GROUP BY dept_name;
```

このクエリでは、内側のサブクエリが外側のクエリに依存しています。内側のサブクエリは、外側のクエリの各部門の平均給与を計算するために使用され、内側のクエリのWHERE句で使用される`outer_query.dept_name`は、外側のクエリで現在処理されている部門名に置き換えられます。

## 感想（一日の感想、雑談）

- 本日も用事があったためまとまった勉強時間は取れなかったが、隙間時間を見つけて少し勉強を進められた。今日はゼロからはじめるデータベース設計　5章の演習問題を解いていた。演習問題を解くことで、自分の理解が浅いことを感じた。明日は6章以降の演習問題を解いていきたい。

## 明日の目標（TODO 目標/できるようになりたいこと）

- Qiita記事投稿
- ゼロからはじめるデータベース設計 第6〜9章
- データベース/SQL QUESTⅰ~ⅴ